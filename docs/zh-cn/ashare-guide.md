# A 股股票分析使用指南

## 概述

AI Hedge Fund 系统现已支持 A 股（中国股票）分析！通过集成 AKShare 数据源，你可以分析沪深两市的股票。

## 功能特性

✅ **支持的股票市场**
- 上海证券交易所（主板、科创板）
- 深圳证券交易所（主板、中小板、创业板）
- 北京证券交易所

✅ **数据类型**
- 股票价格数据（日K、周K、月K）
- 财务指标数据（PE、PB、ROE 等）
- 股票基本信息（市值、行业、股本等）
- 股票搜索功能

✅ **股票代码格式**
- `600519` - 6位数字代码（自动判断交易所）
- `sh600519` - 带交易所前缀（上交所）
- `sz000001` - 带交易所前缀（深交所）

## 快速开始

### 1. 使用分析脚本

```bash
# 分析贵州茅台 (600519)
python analyze_ashare.py --ticker 600519

# 分析平安银行 (000001)，指定日期范围
python analyze_ashare.py --ticker 000001 --start-date 2025-01-01 --end-date 2025-02-01

# 使用模拟数据测试
python analyze_ashare.py --ticker 600519 --mock
```

### 2. 在主系统中使用

```bash
# 分析 A 股股票（使用 MiniMax 模型）
python src/main.py --ticker 600519 --model MiniMax-M2.5 --show-reasoning

# 分析多只 A 股
python src/main.py --ticker 600519,000001,300001 --model MiniMax-M2.5
```

## 股票代码规则

### 上海证券交易所
| 代码前缀 | 板块 | 示例 |
|---------|------|------|
| 600/601/603/605 | 主板 | 600519 贵州茅台 |
| 688 | 科创板 | 688981 中芯国际 |
| 510/511/512 | ETF | 510300 沪深300ETF |

### 深圳证券交易所
| 代码前缀 | 板块 | 示例 |
|---------|------|------|
| 000/001 | 主板 | 000001 平安银行 |
| 002/003 | 中小板 | 002415 海康威视 |
| 300 | 创业板 | 300001 特锐德 |
| 159 | ETF | 159915 创业板ETF |

### 北京证券交易所
| 代码前缀 | 板块 | 示例 |
|---------|------|------|
| 43/83/87 | 北交所 | 835185 贝特瑞 |

## 常用 A 股示例

### 蓝筹股
- `600519` - 贵州茅台（白酒）
- `000001` - 平安银行（银行）
- `600036` - 招商银行（银行）
- `000858` - 五粮液（白酒）

### 科技股
- `688981` - 中芯国际（半导体）
- `300750` - 宁德时代（新能源）
- `002415` - 海康威视（安防）
- `000725` - 京东方A（面板）

### 新能源
- `300750` - 宁德时代（电池）
- `002594` - 比亚迪（汽车）
- `601012` - 隆基绿能（光伏）
- `300014` - 亿纬锂能（电池）

### 医药
- `600276` - 恒瑞医药（创新药）
- `000538` - 云南白药（中药）
- `300003` - 乐普医疗（医疗器械）

## 注意事项

### 1. 数据限制
- AKShare 数据源需要网络连接
- 某些网络环境可能需要代理
- 数据更新频率取决于 AKShare

### 2. 与美股分析的区别
- A 股使用人民币（CNY）计价
- A 股有涨跌停限制（±10% 或 ±20%）
- A 股交易时间不同（9:30-11:30, 13:00-15:00）
- A 股有 T+1 交易制度

### 3. 模拟数据
如果网络连接有问题，可以使用 `--mock` 参数使用模拟数据进行测试。

## 故障排除

### 问题：无法获取数据
```
Error fetching A-share prices: HTTPSConnectionPool ...
```

**解决方案：**
1. 检查网络连接
2. 检查是否需要代理
3. 使用 `--mock` 参数进行测试

### 问题：股票代码无效
```
错误: 600519 不是有效的 A 股代码
```

**解决方案：**
确保使用正确的 6 位数字代码。

### 问题：依赖缺失
```
ModuleNotFoundError: No module named 'akshare'
```

**解决方案：**
```bash
uv pip install akshare
```

## 技术实现

### 文件结构
```
src/tools/
├── api.py           # 主 API 接口（已集成 A 股支持）
├── akshare_api.py   # A 股数据接口模块
└── ...

analyze_ashare.py    # A 股分析示例脚本
```

### 核心函数

```python
from src.tools.akshare_api import (
    get_prices,           # 获取价格数据
    get_financial_metrics, # 获取财务指标
    get_stock_info,       # 获取股票信息
    search_stocks,        # 搜索股票
    is_ashare,           # 判断是否为 A 股
)

# 获取价格数据
prices = get_prices("600519", "2025-01-01", "2025-02-01")

# 获取财务指标
metrics = get_financial_metrics("600519", "2025-02-01")

# 获取股票信息
info = get_stock_info("600519")

# 搜索股票
results = search_stocks("茅台")
```

## 下一步计划

- [ ] 添加 A 股新闻和公告数据
- [ ] 添加 A 股内部人交易数据
- [ ] 添加 A 股分析师评级数据
- [ ] 优化 A 股特有指标（如换手率、量比等）
- [ ] 添加 A 股行业分析功能

## 贡献

欢迎提交 Issue 和 PR 来改进 A 股支持功能！
